<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      template="Template.xhtml">
      
       <ui:define name="content">
       #{GiftListBean.init()}
            <p:tabMenu activeIndex="2">  
     <p:menuitem value="Home" url="userhome.xhtml" icon="ui-icon-person"/>  
     <p:menuitem value="MyAccount" url="personaldata.xhtml" icon="ui-icon-search" />  
     <p:menuitem value="ImieiViaggi" url="imieiviaggi.xhtml" icon="ui-icon-search"/>  
     <p:menuitem value="GiftList" url="giftlist.xhtml" icon="ui-icon-wrench"/>  
     </p:tabMenu>  
			
			
			<h:form id="form">  
  
    <p:growl id="msgs" value="Inserisci valida email"/>  
    
   
  
    <p:panel header="Aggiungi un nuovo amico">  
        <h:panelGrid columns="2" id="grid">  
        <h:outputLabel value="Numero Persone" ></h:outputLabel>  
         <p:spinner id="numpers"   value="#{GiftListBean.giftListDTO.npersone}" min="1" max="15">         
     	</p:spinner> 
            <h:outputLabel value="Email Amico a" for="email"></h:outputLabel>  
            <p:inputText id="email"   value="#{GiftListBean.amico}" >  
               <f:validateRegex pattern="(^$|^.*@.*\..*$)" />
            </p:inputText>
              
             
              
            <p:commandButton id="btn_add" value="Aggiungi Amico" update="emails msgs @parent"  
                            action="#{GiftListBean.reinit}" >  
                <p:collector value="#{GiftListBean.amico}"   
                            addTo="#{GiftListBean.giftListDTO.amico}" />  
            </p:commandButton>  
        </h:panelGrid>  
    </p:panel>  
      
    <p:outputPanel id="emails">  
        <p:dataTable id="emailsTable" value="#{GiftListBean.giftListDTO.amico}" var="amico">  
  
            <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Title" />  
                </f:facet>  
                <h:outputText value="#{amico}" />  
            </p:column>  
  
            
  
            <p:column>  
                <f:facet name="header">  
                    <h:outputText value="Operation" />  
                </f:facet>  
                <p:commandLink value="Remove" update=":form:emails" process=":form:emails">  
                    <p:collector value="#{amico}"  
                                 removeFrom="#{GiftListBean.giftListDTO.amico}" />  
                </p:commandLink>  
            </p:column>  
  
        </p:dataTable>  
    </p:outputPanel>  
              <p:commandButton value="Create Gift List" action="#{GiftListBean.creaGift()}" update="emails msgs @parent" />  
              
  
</h:form> 

 
       
       </ui:define>
      
</ui:composition>